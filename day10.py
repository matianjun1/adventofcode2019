from copy import copy
a = """
..............#.#...............#....#....
#.##.......#....#.#..##........#...#......
..#.....#....#..#.#....#.....#.#.##..#..#.
...........##...#...##....#.#.#....#.##..#
....##....#...........#..#....#......#.###
.#...#......#.#.#.#...#....#.##.##......##
#.##....#.....#.....#...####........###...
.####....#.......#...##..#..#......#...#..
...............#...........#..#.#.#.......
........#.........##...#..........#..##...
...#..................#....#....##..#.....
.............#..#.#.........#........#.##.
...#.#....................##..##..........
.....#.#...##..............#...........#..
......#..###.#........#.....#.##.#......#.
#......#.#.....#...........##.#.....#..#.#
.#.............#..#.....##.....###..#..#..
.#...#.....#.....##.#......##....##....#..
.........#.#..##............#..#...#......
..#..##...#.#..#....#..#.#.......#.##.....
#.......#.#....#.#..##.#...#.......#..###.
.#..........#...##.#....#...#.#.........#.
..#.#.......##..#.##..#.......#.###.......
...#....###...#......#..#.....####........
.............#.#..........#....#......#...
#................#..................#.###.
..###.........##...##..##.................
.#.........#.#####..#...##....#...##......
........#.#...#......#.................##.
.##.....#..##.##.#....#....#......#.#....#
.....#...........#.............#.....#....
........#.##.#...#.###.###....#.#......#..
..#...#.......###..#...#.##.....###.....#.
....#.....#..#.....#...#......###...###...
#..##.###...##.....#.....#....#...###..#..
........######.#...............#...#.#...#
...#.....####.##.....##...##..............
###..#......#...............#......#...#..
#..#...#.#........#.#.#...#..#....#.#.####
#..#...#..........##.#.....##........#.#..
........#....#..###..##....#.#.......##..#
.................##............#.......#..
""".strip()
a = a.split("\n")
_asteroids = set()
for i, x in enumerate(a):
    for j, v in enumerate(x):
        if v == "#":
            _asteroids.add((i, j))


max_total = (0, None)
for x in _asteroids:
    asteroids = copy(_asteroids)
    asteroids.remove(x)
    small = set()
    big = set()
    for ax in asteroids:
        if x[1] == ax[1]:
            v = None
        else:
            v = (x[0] - ax[0]) / (x[1] - ax[1])
        if x > ax:
            big.add(v)
        else:
            small.add(v)
    total = len(small) + len(big)
    if total > max_total[0]:
        max_total = (total, x)

print("day10-1:", max_total[0])
print("best station:", max_total[1])

x = max_total[1]
asteroids = copy(_asteroids)
asteroids.remove(x)
small = {}
big = {}
for ax in asteroids:
    if x[1] == ax[1]:
        v = None
    else:
        v = (x[0] - ax[0]) / (x[1] - ax[1])
    if (ax[1], x[0]) > (x[1], ax[0]):
        big.setdefault(v, []).append(ax)
    else:
        small.setdefault(v, []).append(ax)

for b in big.values():
    b.sort(key=lambda ax: abs(x[0] - ax[0] + x[1] - ax[1]), reverse=True)
for b in small.values():
    b.sort(key=lambda ax: abs(x[0] - ax[0] + x[1] - ax[1]), reverse=True)

results = [big.pop(None)] + [big[k] for k in sorted(list(big.keys()))] + [small.pop(None)] + [small[k] for k in sorted(list(small.keys()))]

count = 0
for item in results:
    if item:
        count += 1
        res = item.pop()
        if count == 200:
            break

print("day10-2:", res[1] * 100 + res[0])
